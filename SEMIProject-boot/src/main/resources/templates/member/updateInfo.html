<!DOCTYPE html>
<html lang="ko" xmlns:th="http://www.thymeleaf.org">

<head>
	<meta charset="UTF-8" />
	<title>내 정보 수정</title>
	<link rel="stylesheet" th:href="@{/css/myPage.css}" />
	<th:block th:replace="~{common/common}"></th:block>
</head>

<body>
	<div th:replace="~{common/header :: header}"></div>

	<div class="my-page-container">
		<!-- 사이드바 -->
		<aside class="my-page-sidebar">
			<ul>
				<li><strong>마이페이지</strong></li>
				<li><a th:href="@{/myPage/info}">내 정보</a></li>
				<li><a th:href="@{/member/changePw}">비밀번호 변경</a></li>
				<li><a th:href="@{/member/quit}">회원 탈퇴</a></li>
				<li><a href="/myPage/myPosts">내가 쓴 글</a></li>
				<li><a href="/myPage/myJjim">내가 찜한 글</a></li>
			</ul>
		</aside>

		<!-- 본문 -->
		<section class="my-page-content">
			<h2>내 정보 수정</h2>

			<!-- 통합 폼 -->
			<form th:action="@{/myPage/updateInfo}" method="post" enctype="multipart/form-data">
				<!-- 프로필 이미지 -->
				<div class="profile-box">
					<img th:with="user=#{user.default.image}" th:src="${session.loginMember.memberImg ?: user}"
						class="profile-img" />
					<p class="join-date" th:text="'가입일자 | ' + ${member.enrollDate}">
						가입일자 | 2025.05.11
					</p>
					<input type="file" name="profileImg" accept="image/*" onchange="previewImage(event)" />
					<img th:with="user=#{user.default.image}" id="preview" class="profile-img" th:src="${user}" />
				</div>

				<!-- 회원 정보 -->
				<div class="info-box">
					<label>아이디</label>
					<p th:text="${member.memberId}">always_lily1009</p>

					<label for="nickname">닉네임</label>
					<input type="text" id="nickname" name="memberNickname" th:value="${member.memberNickname}"
						required />

					<label for="tel">전화번호</label>
					<input type="tel" id="tel" name="memberTel" th:value="${member.memberTel}" required />

					<label for="postcode">주소</label>
					<div style="display: flex; gap: 10px">
						<input type="text" id="postcode" name="memberPostcode" th:value="${postcode}" placeholder="우편번호"
							required />
						<button type="button" class="btn" onclick="searchAddress()">
							주소검색
						</button>
					</div>

					<input type="text" id="address" name="memberAddress" th:value="${address}" placeholder="도로명 주소"
						required />

					<input type="text" id="detailAddress" name="memberAddressDetail" th:value="${detailAddress}"
						placeholder="상세 주소" required />

					<label for="checkPw">비밀번호 확인</label>
					<input type="password" id="checkPw" name="memberPw" placeholder="비밀번호를 확인해주세요" required />
				</div>

				<div class="btn-box">
					<button type="submit" class="btn purple-btn">수정 완료</button>
				</div>
			</form>
		</section>
	</div>

	<div th:replace="~{common/footer :: footer}"></div>

	<!-- 다음 주소 API -->
	<script src="https://t1.daumcdn.net/mapjsapi/bundle/postcode/prod/postcode.v2.js"></script>
	<script src="/js/updateInfo.js"></script>
</body>

</html>