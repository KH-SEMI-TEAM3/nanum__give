<!DOCTYPE html>
<html lang="ko" xmlns:th="http://www.thymeleaf.org">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title th:text="${boardName}">게시판 이름</title>

    <th:block th:replace="~{common/common}"></th:block>

    <link rel="stylesheet" th:href="@{/css/board/boardWrite-style.css}" />
  </head>
  <body>
    <main>
      <th:block th:replace="~{common/header}"></th:block>

      <form
        action="update"
        th:object="${board}"
        method="POST"
        class="board-write"
        id="boardUpdateFrm"
        enctype="multipart/form-data"
      >
        <h1 class="board-name" th:text="${boardName}">게시판 이름</h1>

        <!--editBoardController로-->

        <!-- 제목 -->
        <h1 class="board-title">
          <input
            type="text"
            name="boardTitle"
            placeholder="제목"
            th:value="${board.boardTitle}"
          />
        </h1>

        <!-- 내용 -->
        <div class="board-content">
          <textarea name="boardContent" th:text="*{boardContent}">
게시글 내용</textarea
          >
        </div>

        <!-- 버튼 영역 -->
        <div class="board-btn-area">
          <button type="submit" id="writebtn">등록</button>
        </div>

        <!-- 수정 성공 시 주소(쿼리스트링) 유지용도 -->
        <input type="hidden" name="cp" th:value="${param.cp}" />
      </form>
    </main>

    <th:block th:replace="~{common/footer}"></th:block>

    <script th:src="@{/js/help/help-update.js}"></script>

    <!-- 이미지 미리보기 설정 -->
    <script th:inline="javascript">
      const imageList = /*[[${board.imageList}]]*/ [];
      const previewList = document.querySelectorAll("img.preview"); // preview클래스를 가진 모든 img태그를 얻어와 배열 형태로 저장
      const orderList = []; // 기존에 존재하던 이미지의 순서(order)를 기록할 배열

      for (let img of imageList) {
        previewList[img.imgOrder].src = img.imgPath + img.imgRename;
        // src속성에 해당 경로를 추가한다. <img class="preview">와 같은 것을 처리할 수 있음

        // 미리보기가 출력된 이미지 순서를
        // orderList에 추가
        orderList.push(img.imgOrder);
        // 01234 배열 중 끝 번호에 넣는다.
      }
    </script>
  </body>
</html>
