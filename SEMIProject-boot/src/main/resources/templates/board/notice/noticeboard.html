<!DOCTYPE html>
<html lang="ko">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>공지게시판 목록</title>
    <!--<link rel="stylesheet" th:href="@{/css/notice/noticeboard.css}"">-->

    <!-- templates/common/common.html 조각으로 추가 -->
    <th:block th:replace="~{common/common}"></th:block>
  </head>

  <body>
    <!-- common/header 추가-->
    <th:block th:replace="~{common/header}"></th:block>

    <!-- 공지 게시판 목록 영역 -->
    <section class="board-list">
      <h1 class="board-name">공지 게시판</h1>

      <div class="list-wrapper">
        <table class="list-table">
          <thead>
            <tr>
              <th>글번호</th>
              <th>제목</th>
              <th>작성자</th>
              <th>작성일</th>
              <th>조회수</th>
            </tr>
          </thead>

          <tbody>
            <!-- 게시글이 존재하지 않을 경우 -->
            <th:block th:if="${#lists.isEmpty(noticeBoardList)}">
              <tr>
                <td colspan="5">공지 게시글이 존재하지 않습니다.</td>
              </tr>
            </th:block>

            <!-- 게시글이 존재할 경우 -->
            <th:block th:unless="${#lists.isEmpty(noticeBoardList)}">
              <tr th:each="board : ${noticeBoardList}" th:object="${board}">
                <!-- 글 번호 -->
                <td th:text="*{boardNo}">1</td>

                <!-- 제목 -->
                <td>
                  <!-- 검색 없는 경우 -->
                  <a
                    th:unless="${param.key}"
                    th:href="@{/notice/{boardCode}/{boardNo},(boardNo=*{boardNo}, cp=1)}"
                    th:text="*{boardTitle}"
                    >공지 제목</a
                  >

                  <!-- 검색 있는 경우 -->
                  <a
                    th:if="${param.key}"
                    th:href="@{/notice/{boardCode}/{boardNo} (boardCode=*{boardCode},boardNo=*{boardNo}, cp=1, key=${param.key}, query=${param.query})}"
                    th:text="*{boardTitle}"
                    >공지 제목</a
                  >
                </td>

                <!-- 작성자 -->
                <td th:text="*{memberNickname}">관리자</td>

                <!-- 작성일 -->
                <td th:text="*{boardWriteDate}">2025-05-20</td>

                <!-- 조회수 -->
                <td th:text="*{readCount}">0</td>
              </tr>
            </th:block>
          </tbody>
        </table>
      </div>
    </section>

    <!-- 페이지네이션 

        <div class="pagination-area">
            <button th:if="${pagination.currentPage > 1}" th:href="@{/board/notice(cp=1)}">&laquo;</button>
            <button th:if="${pagination.currentPage > 1}"
                th:href="@{/board/notice(cp=${pagination.prevPage})}">&lt;</button>
            <button th:each="i : ${#numbers.sequence(pagination.startPage, pagination.endPage)}"
                th:classappend="${i == pagination.currentPage} ? 'active'" th:text="${i}"
                th:href="@{/board/notice(cp=${i})}">1</button>
            <button th:if="${pagination.currentPage < pagination.maxPage}"
                th:href="@{/board/notice(cp=${pagination.nextPage})}">&gt;</button>
            <button th:if="${pagination.currentPage < pagination.maxPage}"
                th:href="@{/board/notice(cp=${pagination.maxPage})}">&raquo;</button>
        </div>
    
        -->

    <!-- 검색 + 글쓰기 -->
    <div class="search-area-wrap">
      <!-- 검색창 (중앙 고정) -->
      <div class="search-area">
        <form th:action="@{/board/notice}" method="get">
          <select name="key">
            <option value="title" th:selected="${param.key == 'title'}">
              제목
            </option>
            <option value="content" th:selected="${param.key == 'content'}">
              내용
            </option>
          </select>
          <div class="search-input-wrap">
            <input
              type="text"
              name="query"
              placeholder="검색어 입력"
              th:value="${param.query}"
            />
            <button type="submit" class="icon-search">
              <svg
                xmlns="http://www.w3.org/2000/svg"
                width="16"
                height="16"
                fill="none"
                stroke="currentColor"
                stroke-width="2"
                viewBox="0 0 24 24"
              >
                <circle cx="11" cy="11" r="8" />
                <line x1="21" y1="21" x2="16.65" y2="16.65" />
              </svg>
            </button>
          </div>
        </form>
      </div>

      <!-- 글쓰기 버튼 (오른쪽 끝) -->
      <div
        class="button-area"
        th:if="${session.loginMember != null and session.loginMember.authority == 0}"
      >
        <a th:href="@{/board/notice/write}" class="write-btn">글쓰기</a>
      </div>
    </div>

    <!-- common/footer 추가-->
    <th:block th:replace="~{common/footer}"></th:block>

    <!-- script 추가-->
    <script th:src="@{/js/header.js}"></script>
  </body>
</html>
