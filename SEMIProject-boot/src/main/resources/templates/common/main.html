<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title th:text="#{app.name}">messages.properties app.name</title>

    <!-- templates/common/common.html 조각으로 추가 -->
    <th:block th:replace="~{common/common}"></th:block>
    <link rel="stylesheet" th:href="@{/css/main.css}" />
    <link rel="stylesheet" th:href="@{/css/common/footer.css}" />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css"
    />
  </head>

  <body>
    <!-- common/header 추가-->
    <th:block th:replace="~{common/header}"></th:block>

    <main>
      <!-- Hero Carousel/Slider -->
      <section class="hero-carousel">
        <div class="carousel-container">
          <div class="carousel-slide active">
            <img
              th:src="@{/images/banner1.png}"
              alt="배너1"
              class="carousel-image"
            />
          </div>
          <div class="carousel-slide">
            <img
              th:src="@{/images/banner2.png}"
              alt="배너2"
              class="carousel-image"
            />
          </div>
          <div class="carousel-slide">
            <img
              th:src="@{/images/banner3.png}"
              alt="배너3"
              class="carousel-image"
            />
          </div>

          <!-- Carousel controls -->
          <button class="carousel-btn prev-btn" aria-label="Previous slide">
            <p>&nbsp;&nbsp;&nbsp;</p>
            <span class="material-symbols-outlined"> arrow_back_ios </span>
          </button>
          <button class="carousel-btn next-btn" aria-label="Next slide">
            <span class="material-symbols-outlined"> arrow_forward_ios </span>
          </button>

          <!-- Carousel indicators -->
          <div class="carousel-indicators">
            <button
              class="indicator-btn active"
              data-slide="0"
              aria-label="Go to slide 1"
            ></button>
            <button
              class="indicator-btn"
              data-slide="1"
              aria-label="Go to slide 2"
            ></button>
            <button
              class="indicator-btn"
              data-slide="2"
              aria-label="Go to slide 3"
            ></button>
          </div>
        </div>
      </section>

      <!-- Product Grid Section -->
      <section class="product-section">
        <div class="section-header">
          <h3 class="section-title">지금 어떤 나눔들이 있는지 확인해보세요</h3>
          <a href="/share/list" class="view-all">
            더보기 <i class="fas fa-chevron-right"></i>
          </a>
        </div>

      <section class="product-section">
        <div class="product-row" th:each="row : ${groupedShareList}">
          <div th:each="post : ${row}" class="product-card-wrapper">
            <a
              th:href="@{'/share/detail/' + ${post.boardNo}}"
              class="product-card"
            >
              <!-- 1. 썸네일 -->
              <div class="product-image-container">
                <img
                  class="product-image"
                  th:src="${post.thumbnail} != null ? ${post.thumbnail} : '/images/default-thumbnail.jpg'"
                  alt="썸네일"
                />
              </div>

              <!-- 2. 정보 -->
              <div class="product-info">
                <div class="product-meta-top">
                  <!-- 상태 뱃지 -->
                  <span
                    class="product-badge"
                    th:classappend="${post.shareStatus == 'Y'} ? ' completed' : ' in-progress'"
                    th:text="${post.shareStatus == 'Y'} ? '나눔완료' : '나눔중'"
                  ></span>

                  <!-- 찜 하트 -->
                  <span class="jjim-count">
                    <i
                      class="fa-heart"
                      th:classappend="${post.jjimCheck == 1} ? ' fa-solid' : ' fa-regular'"
                    ></i>
                    <span th:text="${post.jjimCount}">0</span>
                  </span>
                </div>

                <h4 class="product-title" th:text="${post.boardTitle}">제목</h4>

                <div class="product-meta">
                  <span th:text="${post.shareBoardCategoryName}">카테고리</span>
                  <span th:text="${post.shareBoardCategoryDetailName}"
                    >세부</span
                  >
                </div>
              </div>
            </a>
          </div>
        </div>
      </section>
    </main>

    <!-- common/footer 추가-->
    <th:block th:replace="~{common/footer}"></th:block>

    <!-- script 추가-->
    <script th:src="@{/js/carousel.js}"></script>
    <script th:inline="javascript">
      /*<![CDATA[*/
      let message = /*[[${message}]]*/ null;
      if (message) {
        alert(message);
      }
      /*]]>*/
    </script>
  </body>
</html>
